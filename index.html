<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run Club Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Run Club Tracker</h1>
            <p>Track your run club participation by analyzing your Strava activities</p>
        </header>

        <!-- Login Section -->
        <div id="loginSection" class="section">
            <h2>Connect with Strava</h2>
            <p>To get started, connect your Strava account to analyze your running activities.</p>
            <button id="connectBtn" class="btn btn-primary">Connect with Strava</button>
        </div>

        <!-- Configuration Section -->
        <div id="configSection" class="section hidden">
            <h2>Run Club Configuration</h2>
            <p>Configure your run club's meeting details to filter activities:</p>

            <form id="configForm">
                <div class="form-group">
                    <label for="profileSelect">Profile:</label>
                    <select id="profileSelect" required>
                        <option value="cmrc" selected>Craft Metropolis Run Club</option>
                        <option value="custom">Custom</option>
                    </select>
                    <small>Select a pre-configured profile or choose Custom to configure your own</small>
                </div>

                <h3>Start Location</h3>
                <div class="form-group-checkbox">
                    <label>
                        <input type="checkbox" id="startAnywhere">
                        Anywhere
                    </label>
                </div>

                <div class="form-group">
                    <label for="startLatitude">Latitude:</label>
                    <input type="number" id="startLatitude" step="0.000001" placeholder="e.g., 51.5074">
                </div>

                <div class="form-group">
                    <label for="startLongitude">Longitude:</label>
                    <input type="number" id="startLongitude" step="0.000001" placeholder="e.g., -0.1278">
                </div>

                <div class="form-group">
                    <label for="startRadius">Search Radius (km):</label>
                    <input type="number" id="startRadius" step="0.1" value="0.5" min="0.1">
                    <small>Activities starting within this distance from the coordinates will be counted</small>
                </div>

                <h3>Finish Location</h3>
                <div class="form-group-checkbox">
                    <label>
                        <input type="checkbox" id="finishAnywhere">
                        Anywhere
                    </label>
                </div>

                <div class="form-group">
                    <label for="finishLatitude">Latitude:</label>
                    <input type="number" id="finishLatitude" step="0.000001" placeholder="e.g., 51.5074">
                </div>

                <div class="form-group">
                    <label for="finishLongitude">Longitude:</label>
                    <input type="number" id="finishLongitude" step="0.000001" placeholder="e.g., -0.1278">
                </div>

                <div class="form-group">
                    <label for="finishRadius">Search Radius (km):</label>
                    <input type="number" id="finishRadius" step="0.1" value="0.5" min="0.1">
                    <small>Activities finishing within this distance from the coordinates will be counted</small>
                </div>

                <h3>Schedule</h3>
                <div class="form-group">
                    <label for="dayOfWeek">Day of Week:</label>
                    <select id="dayOfWeek" required>
                        <option value="0">Sunday</option>
                        <option value="1">Monday</option>
                        <option value="2" selected>Tuesday</option>
                        <option value="3">Wednesday</option>
                        <option value="4">Thursday</option>
                        <option value="5">Friday</option>
                        <option value="6">Saturday</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="startTime">Start Time:</label>
                    <input type="time" id="startTime" value="19:00" required>
                    <small>The typical start time for your run club</small>
                </div>

                <div class="form-group">
                    <label for="timeWindow">Time Window (minutes):</label>
                    <input type="number" id="timeWindow" value="15" min="1" max="60" required>
                    <small>Activities starting within Â± this many minutes from start time will be counted</small>
                </div>

                <button type="submit" class="btn btn-primary">Analyze Activities</button>
                <button type="button" id="logoutBtn" class="btn btn-secondary">Disconnect</button>
            </form>
        </div>

        <!-- Loading Section -->
        <div id="loadingSection" class="section hidden">
            <div class="loading-spinner"></div>
            <p>Fetching and analyzing your Strava activities...</p>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="section hidden">
            <h2>Your Run Club Stats</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalRunClubRuns">0</div>
                    <div class="stat-label">Run Club Runs</div>
                </div>

                <div class="stat-card">
                    <div class="stat-value" id="totalDistance">0 km</div>
                    <div class="stat-label">Total Distance</div>
                </div>

                <div class="stat-card">
                    <div class="stat-value" id="avgDistance">0 km</div>
                    <div class="stat-label">Avg Distance</div>
                </div>

                <div class="stat-card">
                    <div class="stat-value" id="totalTime">0:00</div>
                    <div class="stat-label">Total Time</div>
                </div>
            </div>

            <!-- Activities List -->
            <div class="activities-section">
                <h3>Recent Run Club Activities</h3>
                <div id="activitiesList" class="activities-list"></div>
            </div>

            <button id="analyzeAgainBtn" class="btn btn-secondary">Analyze Again</button>
        </div>

        <!-- Error Section -->
        <div id="errorSection" class="section hidden">
            <div class="error-message">
                <h3>Error</h3>
                <p id="errorText"></p>
            </div>
            <button id="retryBtn" class="btn btn-primary">Try Again</button>
        </div>
    </div>

    <footer>
        <p>Powered by Strava API | <a href="https://github.com/jonwtech/run-club-tracker">View on GitHub</a></p>
    </footer>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
